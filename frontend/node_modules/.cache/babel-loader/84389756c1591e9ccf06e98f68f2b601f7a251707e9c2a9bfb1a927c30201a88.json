{"ast":null,"code":"var _jsxFileName = \"C:\\\\kkkkk\\\\transit-master\\\\frontend\\\\src\\\\components\\\\MyForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport './MyForm.css';\nimport Swal from 'sweetalert2';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst MyForm = () => {\n  _s();\n  const [step, setStep] = useState(1);\n  const [formValues, setFormValues] = useState({\n    exportateur: '',\n    destinataire: '',\n    date_ouverture: '',\n    provenance: '',\n    regime_client: '',\n    mode_transport: '',\n    num_dr_gls: '',\n    num_lta_bl: '',\n    nombre_total_colis: '',\n    poids_total_brut: '',\n    poids_total_net: '',\n    volume_total: '',\n    description: '',\n    date_estimative_darrivee: '',\n    date_reele_darrivee: '',\n    cree_par: ''\n  });\n  const navigate = useNavigate();\n  useEffect(() => {\n    const storedDossierId = localStorage.getItem('dossierId');\n    if (storedDossierId) {\n      setStep(1);\n    }\n  }, []);\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormValues(prevValues => ({\n      ...prevValues,\n      [name]: value\n    }));\n  };\n  const handleNextStep = e => {\n    e.preventDefault();\n    const currentDate = new Date().toISOString().slice(0, 10);\n    setFormValues(prevValues => ({\n      ...prevValues,\n      date_transmission_operation: currentDate\n    }));\n    Swal.fire({\n      title: 'Étape suivante',\n      text: 'Vous allez passer à l\\'étape suivante',\n      timer: 1000,\n      showConfirmButton: false,\n      timerProgressBar: true\n    }).then(() => {\n      setStep(prevStep => prevStep + 1);\n    });\n  };\n  const handlePreviousStep = e => {\n    e.preventDefault();\n    setStep(prevStep => prevStep - 1);\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    fetch('http://localhost:8000/api/dossiers', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        ...formValues\n        // Mettez ici la logique pour récupérer l'ID de l'utilisateur courant depuis l'authentification\n      })\n    }).then(response => {\n      if (!response.ok) {\n        throw new Error('Erreur lors de la soumission du formulaire');\n      }\n      return response.json();\n    }).then(data => {\n      localStorage.setItem('dossierId', data.id_dossier);\n      setStep(prevStep => prevStep + 1);\n      Swal.fire({\n        title: 'Succès !',\n        text: 'Données enregistrées avec succès.',\n        icon: 'success',\n        timer: 1000,\n        showConfirmButton: false\n      }).then(() => {\n        navigate(`/fichier`);\n      });\n    }).catch(error => {\n      console.error('Erreur:', error);\n      Swal.fire({\n        title: 'Erreur',\n        text: 'Une erreur s\\'est produite lors de l\\'enregistrement des données.',\n        icon: 'error',\n        timer: 3000,\n        showConfirmButton: false\n      });\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"form-container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"styled-paper\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"form-title\",\n        children: [\"\\xC9tape \", step]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: step === 3 ? handleSubmit : handleNextStep,\n        children: [step === 1 && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"center\", {\n            children: \"Exportateur\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"exportateur\",\n            value: formValues.exportateur,\n            onChange: handleChange,\n            className: \"form-field\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"submit-button\",\n            children: \"Suivant\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true), step === 2 && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handlePreviousStep,\n            className: \"precedent-button\",\n            children: \"Pr\\xE9c\\xE9dent\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"submit-button\",\n            children: \"Suivant\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true), step === 3 && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handlePreviousStep,\n            className: \"precedent-button\",\n            children: \"Pr\\xE9c\\xE9dent\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"register-button\",\n            children: \"Enregistrer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 5\n  }, this);\n};\n_s(MyForm, \"X+BXRICfPX8hRsX+3KbSvdhrp4I=\", false, function () {\n  return [useNavigate];\n});\n_c = MyForm;\nexport default MyForm;\nvar _c;\n$RefreshReg$(_c, \"MyForm\");","map":{"version":3,"names":["React","useState","useEffect","Swal","useNavigate","jsxDEV","_jsxDEV","Fragment","_Fragment","MyForm","_s","step","setStep","formValues","setFormValues","exportateur","destinataire","date_ouverture","provenance","regime_client","mode_transport","num_dr_gls","num_lta_bl","nombre_total_colis","poids_total_brut","poids_total_net","volume_total","description","date_estimative_darrivee","date_reele_darrivee","cree_par","navigate","storedDossierId","localStorage","getItem","handleChange","e","name","value","target","prevValues","handleNextStep","preventDefault","currentDate","Date","toISOString","slice","date_transmission_operation","fire","title","text","timer","showConfirmButton","timerProgressBar","then","prevStep","handlePreviousStep","handleSubmit","fetch","method","headers","body","JSON","stringify","response","ok","Error","json","data","setItem","id_dossier","icon","catch","error","console","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","onChange","onClick","_c","$RefreshReg$"],"sources":["C:/kkkkk/transit-master/frontend/src/components/MyForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './MyForm.css';\nimport Swal from 'sweetalert2';\nimport { useNavigate } from 'react-router-dom';\n\nconst MyForm = () => {\n  const [step, setStep] = useState(1);\n  const [formValues, setFormValues] = useState({\n    exportateur: '',             \n    destinataire: '',            \n    date_ouverture: '',          \n    provenance: '',              \n    regime_client: '',          \n    mode_transport: '',         \n    num_dr_gls: '',             \n    num_lta_bl: '',             \n    nombre_total_colis: '',     \n    poids_total_brut: '',       \n    poids_total_net: '',        \n    volume_total: '',           \n    description: '',            \n    date_estimative_darrivee: '',\n    date_reele_darrivee: '',     \n    cree_par: ''\n  });\n\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const storedDossierId = localStorage.getItem('dossierId');\n    if (storedDossierId) {\n      setStep(1);\n    }\n  }, []);\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormValues(prevValues => ({\n      ...prevValues,\n      [name]: value,\n    }));\n  };\n\n  const handleNextStep = (e) => {\n    e.preventDefault();\n    const currentDate = new Date().toISOString().slice(0, 10);\n    setFormValues(prevValues => ({\n      ...prevValues,\n      date_transmission_operation: currentDate\n    }));\n\n    Swal.fire({\n      title: 'Étape suivante',\n      text: 'Vous allez passer à l\\'étape suivante',\n      timer: 1000,\n      showConfirmButton: false,\n      timerProgressBar: true,\n    }).then(() => {\n      setStep(prevStep => prevStep + 1);\n    });\n  };\n\n  const handlePreviousStep = (e) => {\n    e.preventDefault();\n    setStep(prevStep => prevStep - 1);\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    fetch('http://localhost:8000/api/dossiers', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        ...formValues,\n        // Mettez ici la logique pour récupérer l'ID de l'utilisateur courant depuis l'authentification\n      }),\n    })\n      .then(response => {\n        if (!response.ok) {\n          throw new Error('Erreur lors de la soumission du formulaire');\n        }\n        return response.json();\n      })\n      .then(data => {\n        localStorage.setItem('dossierId', data.id_dossier);\n        setStep(prevStep => prevStep + 1);\n        Swal.fire({\n          title: 'Succès !',\n          text: 'Données enregistrées avec succès.',\n          icon: 'success',\n          timer: 1000,\n          showConfirmButton: false,\n        }).then(() => {\n          navigate(`/fichier`);\n        });\n      })\n      .catch(error => {\n        console.error('Erreur:', error);\n        Swal.fire({\n          title: 'Erreur',\n          text: 'Une erreur s\\'est produite lors de l\\'enregistrement des données.',\n          icon: 'error',\n          timer: 3000,\n          showConfirmButton: false,\n        });\n      });\n  };\n\n  return (\n    <div className=\"form-container\">\n      <div className=\"styled-paper\">\n        <h2 className=\"form-title\">Étape {step}</h2>\n        <form onSubmit={step === 3 ? handleSubmit : handleNextStep}>\n          {step === 1 && (\n            <>\n              <center>Exportateur</center>\n              <input\n                type=\"text\"\n                name=\"exportateur\"\n                value={formValues.exportateur}\n                onChange={handleChange}\n                className=\"form-field\"\n              />\n              {/* Ajoutez les autres champs du formulaire ici */}\n              <button type=\"submit\" className=\"submit-button\">Suivant</button>\n            </>\n          )}\n          {step === 2 && (\n            <>\n              {/* Ajoutez les champs de l'étape 2 ici */}\n              <button onClick={handlePreviousStep} className=\"precedent-button\">Précédent</button>\n              <button type=\"submit\" className=\"submit-button\">Suivant</button>\n            </>\n          )}\n          {step === 3 && (\n            <>\n              {/* Ajoutez les champs de l'étape 3 ici */}\n              <button onClick={handlePreviousStep} className=\"precedent-button\">Précédent</button>\n              <button type=\"submit\" className=\"register-button\">Enregistrer</button>\n            </>\n          )}\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default MyForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}