{"ast":null,"code":"var _jsxFileName = \"C:\\\\kkkkk\\\\transit-master\\\\frontend\\\\src\\\\UserDropdown.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Link, useNavigate } from \"react-router-dom\";\nimport Swal from 'sweetalert2';\nimport './UserDropdown.css'; // Import your CSS file for styling\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UserDropdown = ({\n  user\n}) => {\n  _s();\n  const [isOpen, setIsOpen] = useState(false);\n  const dropdownRef = useRef(null);\n  useEffect(() => {\n    const handleClickOutside = event => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\n        setIsOpen(false);\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, []);\n  console.log(user);\n  const toggleDropdown = () => {\n    setIsOpen(!isOpen);\n  };\n  const handleLogout = () => {\n    Swal.fire({\n      title: 'Are you sure?',\n      text: 'Do you really want to log out?',\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#3085d6',\n      cancelButtonColor: '#d33',\n      confirmButtonText: 'Yes, log out!'\n    }).then(result => {\n      if (result.isConfirmed) {\n        const token = sessionStorage.getItem('token');\n        if (!token) {\n          console.error('No token found in sessionStorage');\n          return;\n        }\n        fetch('http://localhost:8000/api/logout', {\n          method: 'GET',\n          headers: {\n            'Authorization': 'Bearer ' + token,\n            'Content-Type': 'application/json',\n            'Accept': 'application/json'\n          }\n        }).then(response => {\n          if (response.status === 401) {\n            throw new Error('Unauthorized');\n          }\n          return response.json();\n        }).then(data => {\n          if (data.status) {\n            sessionStorage.removeItem('token');\n            Swal.fire({\n              icon: 'success',\n              title: 'Logged Out',\n              text: 'You have been successfully logged out.',\n              showConfirmButton: false,\n              timer: 1500\n            }).then(() => {\n              window.location.href = '/login';\n            });\n          }\n        }).catch(error => {\n          console.error('Error:', error);\n        });\n      }\n    });\n  };\n  // Vérifier si les données utilisateur existent\n  if (!user || Object.keys(user).length === 0) {\n    return null; // Ne rien afficher si les données utilisateur sont vides\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dropdown-container\",\n    ref: dropdownRef,\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      className: \"dropdown-button\",\n      onClick: toggleDropdown,\n      \"aria-expanded\": isOpen,\n      children: [user ? user.name : 'User', /*#__PURE__*/_jsxDEV(\"i\", {\n        className: `fa fa-fw fa-angle-${isOpen ? 'up' : 'down'}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `dropdown-menu ${isOpen ? 'show' : ''}`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: user.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: user.role ? user.role.join(', ') : ''\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"#\",\n          onClick: handleLogout,\n          children: \"Log Out\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 9\n  }, this);\n};\n_s(UserDropdown, \"uhOyve9TWk+bvhPJTPlaMsUEQAY=\");\n_c = UserDropdown;\nexport default UserDropdown;\nvar _c;\n$RefreshReg$(_c, \"UserDropdown\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Link","useNavigate","Swal","jsxDEV","_jsxDEV","UserDropdown","user","_s","isOpen","setIsOpen","dropdownRef","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","console","log","toggleDropdown","handleLogout","fire","title","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","then","result","isConfirmed","token","sessionStorage","getItem","error","fetch","method","headers","response","status","Error","json","data","removeItem","showConfirmButton","timer","window","location","href","catch","Object","keys","length","className","ref","children","type","onClick","name","fileName","_jsxFileName","lineNumber","columnNumber","role","join","_c","$RefreshReg$"],"sources":["C:/kkkkk/transit-master/frontend/src/UserDropdown.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { Link, useNavigate } from \"react-router-dom\";\n\nimport Swal from 'sweetalert2';\nimport './UserDropdown.css'; // Import your CSS file for styling\n\nconst UserDropdown = ({ user }) => {\n    const [isOpen, setIsOpen] = useState(false);\n    const dropdownRef = useRef(null);\n\n    useEffect(() => {\n        const handleClickOutside = (event) => {\n            if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\n                setIsOpen(false);\n            }\n        };\n\n        document.addEventListener('mousedown', handleClickOutside);\n        return () => {\n            document.removeEventListener('mousedown', handleClickOutside);\n        };\n    }, []);\n    console.log(user)\n    const toggleDropdown = () => {\n        setIsOpen(!isOpen);\n    };\n\n    const handleLogout = () => {\n        Swal.fire({\n            title: 'Are you sure?',\n            text: 'Do you really want to log out?',\n            icon: 'warning',\n            showCancelButton: true,\n            confirmButtonColor: '#3085d6',\n            cancelButtonColor: '#d33',\n            confirmButtonText: 'Yes, log out!'\n        }).then((result) => {\n            if (result.isConfirmed) {\n                const token = sessionStorage.getItem('token');\n                if (!token) {\n                    console.error('No token found in sessionStorage');\n                    return;\n                }\n\n                fetch('http://localhost:8000/api/logout', {\n                    method: 'GET',\n                    headers: {\n                        'Authorization': 'Bearer ' + token,\n                        'Content-Type': 'application/json',\n                        'Accept': 'application/json',\n                    },\n                })\n                .then(response => {\n                    if (response.status === 401) {\n                        throw new Error('Unauthorized');\n                    }\n                    return response.json();\n                })\n                .then(data => {\n                    if (data.status) {\n                        sessionStorage.removeItem('token');\n                        Swal.fire({\n                            icon: 'success',\n                            title: 'Logged Out',\n                            text: 'You have been successfully logged out.',\n                            showConfirmButton: false,\n                            timer: 1500\n                        }).then(() => {\n                            window.location.href = '/login';\n                        });\n                    }\n                })\n                .catch(error => {\n                    console.error('Error:', error);\n                });\n            }\n        });\n    };\n     // Vérifier si les données utilisateur existent\n     if (!user || Object.keys(user).length === 0) {\n        return null; // Ne rien afficher si les données utilisateur sont vides\n    }\n\n\n    return (\n        <div className=\"dropdown-container\" ref={dropdownRef}>\n            <button\n                type=\"button\"\n                className=\"dropdown-button\"\n                onClick={toggleDropdown}\n                aria-expanded={isOpen}\n            >\n                {user ? user.name : 'User'}\n                <i className={`fa fa-fw fa-angle-${isOpen ? 'up' : 'down'}`}></i>\n            </button>\n            <div className={`dropdown-menu ${isOpen ? 'show' : ''}`}>\n                <div>\n                    <p>{user.name}</p>\n                    <p>{user.role ? user.role.join(', ') : ''}</p>\n                </div>\n                <div>\n                    <a href=\"#\" onClick={handleLogout}>Log Out</a>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default UserDropdown;\n\n\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAC1D,SAASC,IAAI,EAAEC,WAAW,QAAQ,kBAAkB;AAEpD,OAAOC,IAAI,MAAM,aAAa;AAC9B,OAAO,oBAAoB,CAAC,CAAC;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAE7B,MAAMC,YAAY,GAAGA,CAAC;EAAEC;AAAK,CAAC,KAAK;EAAAC,EAAA;EAC/B,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGZ,QAAQ,CAAC,KAAK,CAAC;EAC3C,MAAMa,WAAW,GAAGX,MAAM,CAAC,IAAI,CAAC;EAEhCD,SAAS,CAAC,MAAM;IACZ,MAAMa,kBAAkB,GAAIC,KAAK,IAAK;MAClC,IAAIF,WAAW,CAACG,OAAO,IAAI,CAACH,WAAW,CAACG,OAAO,CAACC,QAAQ,CAACF,KAAK,CAACG,MAAM,CAAC,EAAE;QACpEN,SAAS,CAAC,KAAK,CAAC;MACpB;IACJ,CAAC;IAEDO,QAAQ,CAACC,gBAAgB,CAAC,WAAW,EAAEN,kBAAkB,CAAC;IAC1D,OAAO,MAAM;MACTK,QAAQ,CAACE,mBAAmB,CAAC,WAAW,EAAEP,kBAAkB,CAAC;IACjE,CAAC;EACL,CAAC,EAAE,EAAE,CAAC;EACNQ,OAAO,CAACC,GAAG,CAACd,IAAI,CAAC;EACjB,MAAMe,cAAc,GAAGA,CAAA,KAAM;IACzBZ,SAAS,CAAC,CAACD,MAAM,CAAC;EACtB,CAAC;EAED,MAAMc,YAAY,GAAGA,CAAA,KAAM;IACvBpB,IAAI,CAACqB,IAAI,CAAC;MACNC,KAAK,EAAE,eAAe;MACtBC,IAAI,EAAE,gCAAgC;MACtCC,IAAI,EAAE,SAAS;MACfC,gBAAgB,EAAE,IAAI;MACtBC,kBAAkB,EAAE,SAAS;MAC7BC,iBAAiB,EAAE,MAAM;MACzBC,iBAAiB,EAAE;IACvB,CAAC,CAAC,CAACC,IAAI,CAAEC,MAAM,IAAK;MAChB,IAAIA,MAAM,CAACC,WAAW,EAAE;QACpB,MAAMC,KAAK,GAAGC,cAAc,CAACC,OAAO,CAAC,OAAO,CAAC;QAC7C,IAAI,CAACF,KAAK,EAAE;UACRf,OAAO,CAACkB,KAAK,CAAC,kCAAkC,CAAC;UACjD;QACJ;QAEAC,KAAK,CAAC,kCAAkC,EAAE;UACtCC,MAAM,EAAE,KAAK;UACbC,OAAO,EAAE;YACL,eAAe,EAAE,SAAS,GAAGN,KAAK;YAClC,cAAc,EAAE,kBAAkB;YAClC,QAAQ,EAAE;UACd;QACJ,CAAC,CAAC,CACDH,IAAI,CAACU,QAAQ,IAAI;UACd,IAAIA,QAAQ,CAACC,MAAM,KAAK,GAAG,EAAE;YACzB,MAAM,IAAIC,KAAK,CAAC,cAAc,CAAC;UACnC;UACA,OAAOF,QAAQ,CAACG,IAAI,CAAC,CAAC;QAC1B,CAAC,CAAC,CACDb,IAAI,CAACc,IAAI,IAAI;UACV,IAAIA,IAAI,CAACH,MAAM,EAAE;YACbP,cAAc,CAACW,UAAU,CAAC,OAAO,CAAC;YAClC5C,IAAI,CAACqB,IAAI,CAAC;cACNG,IAAI,EAAE,SAAS;cACfF,KAAK,EAAE,YAAY;cACnBC,IAAI,EAAE,wCAAwC;cAC9CsB,iBAAiB,EAAE,KAAK;cACxBC,KAAK,EAAE;YACX,CAAC,CAAC,CAACjB,IAAI,CAAC,MAAM;cACVkB,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;YACnC,CAAC,CAAC;UACN;QACJ,CAAC,CAAC,CACDC,KAAK,CAACf,KAAK,IAAI;UACZlB,OAAO,CAACkB,KAAK,CAAC,QAAQ,EAAEA,KAAK,CAAC;QAClC,CAAC,CAAC;MACN;IACJ,CAAC,CAAC;EACN,CAAC;EACA;EACA,IAAI,CAAC/B,IAAI,IAAI+C,MAAM,CAACC,IAAI,CAAChD,IAAI,CAAC,CAACiD,MAAM,KAAK,CAAC,EAAE;IAC1C,OAAO,IAAI,CAAC,CAAC;EACjB;EAGA,oBACInD,OAAA;IAAKoD,SAAS,EAAC,oBAAoB;IAACC,GAAG,EAAE/C,WAAY;IAAAgD,QAAA,gBACjDtD,OAAA;MACIuD,IAAI,EAAC,QAAQ;MACbH,SAAS,EAAC,iBAAiB;MAC3BI,OAAO,EAAEvC,cAAe;MACxB,iBAAeb,MAAO;MAAAkD,QAAA,GAErBpD,IAAI,GAAGA,IAAI,CAACuD,IAAI,GAAG,MAAM,eAC1BzD,OAAA;QAAGoD,SAAS,EAAE,qBAAqBhD,MAAM,GAAG,IAAI,GAAG,MAAM;MAAG;QAAAsD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC7D,CAAC,eACT7D,OAAA;MAAKoD,SAAS,EAAE,iBAAiBhD,MAAM,GAAG,MAAM,GAAG,EAAE,EAAG;MAAAkD,QAAA,gBACpDtD,OAAA;QAAAsD,QAAA,gBACItD,OAAA;UAAAsD,QAAA,EAAIpD,IAAI,CAACuD;QAAI;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAClB7D,OAAA;UAAAsD,QAAA,EAAIpD,IAAI,CAAC4D,IAAI,GAAG5D,IAAI,CAAC4D,IAAI,CAACC,IAAI,CAAC,IAAI,CAAC,GAAG;QAAE;UAAAL,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC7C,CAAC,eACN7D,OAAA;QAAAsD,QAAA,eACItD,OAAA;UAAG+C,IAAI,EAAC,GAAG;UAACS,OAAO,EAAEtC,YAAa;UAAAoC,QAAA,EAAC;QAAO;UAAAI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC7C,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACL,CAAC;AAEd,CAAC;AAAC1D,EAAA,CApGIF,YAAY;AAAA+D,EAAA,GAAZ/D,YAAY;AAsGlB,eAAeA,YAAY;AAAC,IAAA+D,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}