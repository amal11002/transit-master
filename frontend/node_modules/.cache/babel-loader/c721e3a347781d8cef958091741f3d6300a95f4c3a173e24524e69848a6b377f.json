{"ast":null,"code":"var _jsxFileName = \"C:\\\\wamp64\\\\www\\\\transit-master-webapp\\\\src\\\\UserDropdown.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport './UserDropdown.css'; // Import your CSS file for styling\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UserDropdown = ({\n  user\n}) => {\n  _s();\n  const [isOpen, setIsOpen] = useState(false);\n  const dropdownRef = useRef(null);\n  useEffect(() => {\n    const handleClickOutside = event => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\n        setIsOpen(false);\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, []);\n  const toggleDropdown = () => {\n    setIsOpen(!isOpen);\n  };\n  const handleLogout = () => {\n    Swal.fire({\n      title: 'Are you sure?',\n      text: 'Do you really want to log out?',\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#3085d6',\n      cancelButtonColor: '#d33',\n      confirmButtonText: 'Yes, log out!'\n    }).then(result => {\n      if (result.isConfirmed) {\n        const token = localStorage.getItem('token');\n        if (!token) {\n          console.error('No token found in localStorage');\n          return;\n        }\n        fetch('http://localhost:8080/api/logout', {\n          method: 'GET',\n          headers: {\n            'Authorization': 'Bearer ' + token,\n            'Content-Type': 'application/json',\n            'Accept': 'application/json'\n          }\n        }).then(response => {\n          if (response.status === 401) {\n            throw new Error('Unauthorized');\n          }\n          return response.json();\n        }).then(data => {\n          if (data.status) {\n            localStorage.removeItem('token');\n            Swal.fire({\n              icon: 'success',\n              title: 'Logged Out',\n              text: 'You have been successfully logged out.',\n              showConfirmButton: false,\n              timer: 1500\n            }).then(() => {\n              navigate('/login');\n            });\n          }\n        }).catch(error => {\n          console.error('Error:', error);\n        });\n      }\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dropdown-container\",\n    ref: dropdownRef,\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      className: \"dropdown-button\",\n      onClick: toggleDropdown,\n      \"aria-expanded\": isOpen,\n      children: [user ? user.name : 'User', /*#__PURE__*/_jsxDEV(\"i\", {\n        className: `fa fa-fw fa-angle-${isOpen ? 'up' : 'down'}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `dropdown-menu ${isOpen ? 'show' : ''}`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: user.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: user.role ? user.role.join(', ') : ''\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"#\",\n          onClick: handleLogout,\n          children: \"Log Out\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 9\n  }, this);\n};\n_s(UserDropdown, \"uhOyve9TWk+bvhPJTPlaMsUEQAY=\");\n_c = UserDropdown;\nexport default UserDropdown;\nvar _c;\n$RefreshReg$(_c, \"UserDropdown\");","map":{"version":3,"names":["React","useState","useEffect","useRef","jsxDEV","_jsxDEV","UserDropdown","user","_s","isOpen","setIsOpen","dropdownRef","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","toggleDropdown","handleLogout","Swal","fire","title","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","then","result","isConfirmed","token","localStorage","getItem","console","error","fetch","method","headers","response","status","Error","json","data","removeItem","showConfirmButton","timer","navigate","catch","className","ref","children","type","onClick","name","fileName","_jsxFileName","lineNumber","columnNumber","role","join","href","_c","$RefreshReg$"],"sources":["C:/wamp64/www/transit-master-webapp/src/UserDropdown.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport './UserDropdown.css'; // Import your CSS file for styling\r\n\r\nconst UserDropdown = ({ user }) => {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const dropdownRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        const handleClickOutside = (event) => {\r\n            if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\r\n                setIsOpen(false);\r\n            }\r\n        };\r\n\r\n        document.addEventListener('mousedown', handleClickOutside);\r\n        return () => {\r\n            document.removeEventListener('mousedown', handleClickOutside);\r\n        };\r\n    }, []);\r\n\r\n    const toggleDropdown = () => {\r\n        setIsOpen(!isOpen);\r\n    };\r\n\r\n    const handleLogout = () => {\r\n        Swal.fire({\r\n            title: 'Are you sure?',\r\n            text: 'Do you really want to log out?',\r\n            icon: 'warning',\r\n            showCancelButton: true,\r\n            confirmButtonColor: '#3085d6',\r\n            cancelButtonColor: '#d33',\r\n            confirmButtonText: 'Yes, log out!'\r\n        }).then((result) => {\r\n            if (result.isConfirmed) {\r\n                const token = localStorage.getItem('token');\r\n                if (!token) {\r\n                    console.error('No token found in localStorage');\r\n                    return;\r\n                }\r\n\r\n                fetch('http://localhost:8080/api/logout', {\r\n                    method: 'GET',\r\n                    headers: {\r\n                        'Authorization': 'Bearer ' + token,\r\n                        'Content-Type': 'application/json',\r\n                        'Accept': 'application/json',\r\n                    },\r\n                })\r\n                .then(response => {\r\n                    if (response.status === 401) {\r\n                        throw new Error('Unauthorized');\r\n                    }\r\n                    return response.json();\r\n                })\r\n                .then(data => {\r\n                    if (data.status) {\r\n                        localStorage.removeItem('token');\r\n                        Swal.fire({\r\n                            icon: 'success',\r\n                            title: 'Logged Out',\r\n                            text: 'You have been successfully logged out.',\r\n                            showConfirmButton: false,\r\n                            timer: 1500\r\n                        }).then(() => {\r\n                            navigate('/login');\r\n                        });\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    console.error('Error:', error);\r\n                });\r\n            }\r\n        });\r\n    };\r\n\r\n    return (\r\n        <div className=\"dropdown-container\" ref={dropdownRef}>\r\n            <button\r\n                type=\"button\"\r\n                className=\"dropdown-button\"\r\n                onClick={toggleDropdown}\r\n                aria-expanded={isOpen}\r\n            >\r\n                {user ? user.name : 'User'}\r\n                <i className={`fa fa-fw fa-angle-${isOpen ? 'up' : 'down'}`}></i>\r\n            </button>\r\n            <div className={`dropdown-menu ${isOpen ? 'show' : ''}`}>\r\n                <div>\r\n                    <p>{user.name}</p>\r\n                    <p>{user.role ? user.role.join(', ') : ''}</p>\r\n                </div>\r\n                <div>\r\n                    <a href=\"#\" onClick={handleLogout}>Log Out</a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default UserDropdown;\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}